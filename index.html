<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap">
        <title>フォートナイト情報アカウント</title>
        <link rel="stylesheet" href="assets/css/style.css">
    </head>
    <body data-page="index" data-base="">
        <div data-include="includes/header.html"></div>

        <main class="page">
            <section class="section home-blog-section">
                <div class="section-head">
                    <h2>最新ブログ</h2>
                    <p>直近のアップデートとイベント情報をまとめてチェック。</p>
                </div>
                <div class="blog-grid home-blog-grid" id="latest-blog-list" aria-live="polite"></div>
                <div class="feature-actions">
                    <a class="btn ghost" href="blog.html">ブログ一覧へ</a>
                </div>
            </section>

            <section class="season-section">
                <div class="season-head">
                    <div>
                        <p class="pill">Season</p>
                        <h2>フォートナイト : シーズン情報</h2>
                    </div>
                </div>
                <div class="season-banner">
                    <img src="assets/img/ForbiddenFrurt_BLEACH.png" alt="期間限定イベントバナー">
                    <div class="season-banner-overlay">
                        <p class="season-banner-tag">開催中</p>
                        <h3>フォートナイト / Blitz Royale × BLEACH</h3>
                        <p>『BLEACH』から、満を持して一護の斬魄刀などがBLITZに登場</p>
                    </div>
                </div>
                <div class="season-scroll" aria-label="フォートナイトのシーズン一覧">
                    <article class="season-card">
                        <img src="assets/img/season/Ch7S1.png" alt="ORIGIN シーズン7">
                        <div class="season-overlay">
                            <p class="season-tag">バトルロイヤル・ゼロビルド</p>
                            <h3>チャプター7 シーズン1</h3>
                            <p>2025年11月30日 ～ 2026年3月5日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/output=format:webp/cmj0p28hr6oy306o8j05okap2" alt="ウィンターフェスト2025">
                        <div class="season-overlay">
                            <p class="season-tag">フォートナイト ORIGIN</p>
                            <h3>チャプター1 シーズン7</h3>
                            <p>2025年12月11日 ～ 2026年3月19日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/D6C49006E2201FAA0EEE4793F1A5BDB6E963CFD7.jpeg" alt="リロードエリートシリーズ">
                        <div class="season-overlay">
                            <p class="season-tag">フォートナイト リロード</p>
                            <h3>シーズン7</h3>
                            <p>2025年11月30日 ～ 2026年2月9日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/cdn-uploader-FNBR_39-11_Margarine_Blitz_DiscoverPlaylistTile_-1920x1080-c76c0269.jpg" alt="FNCS 2026">
                        <div class="season-overlay">
                            <p class="season-tag">フォートナイト × BLEACH</p>
                            <h3>Blitz Royale</h3>
                            <p>2025年12月23日 ～ 2026年1月9日まで</p>
                            <p></p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/1AAB7FE506DEFA0C249C559CA84930718AB8FA35.jpeg" alt="FNCS 2026">
                        <div class="season-overlay">
                            <p class="season-tag">Ballistic</p>
                            <h3>シーズン3</h3>
                            <p>2025年11月30日 ～ 2026年3月5日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/Juno_Rise_of_the_Ninja.png" alt="Juno_Rise_of_the_Ninja">
                        <div class="season-overlay">
                            <p class="season-tag">LEGO Fortnite</p>
                            <h3>Rise of the Ninja</h3>
                            <p>2025年12月11日 ～ 2026年4月2日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/Sparks_S12.png" alt="Sparks_S12">
                        <div class="season-overlay">
                            <p class="season-tag">Fortnite Festival</p>
                            <h3>シーズン12</h3>
                            <p>2025年12月11日 ～ 2026年2月5日まで</p>
                        </div>
                    </article>
                    <article class="season-card">
                        <img src="assets/img/season/A7EB42CB0566464306F1CDC9DA83AEA4B240D09D.jpeg" alt="DelMar_S10">
                        <div class="season-overlay">
                            <p class="season-tag">Rocket Racing</p>
                            <h3>シーズン10</h3>
                            <p>2025年11月30日 ～ 2026年3月5日まで</p>
                        </div>
                    </article>
                </div>
            </section>

            <section class="section home-tournament-section">
                <div class="section-head">
                    <h2>本日の競技</h2>
                    <p>今日開催される大会をまとめてチェック。</p>
                </div>
                <div id="home-tournament-today" class="tournament-grid tournament-today-grid" aria-live="polite"></div>
                <div class="feature-actions">
                    <a class="btn ghost" href="Tournament.html">競技スケジュールを見る</a>
                </div>
            </section>

            <section id="quests" class="feature">
                <div class="feature-text">
                    <h2>フォートナイト ウィンターフェスト2025</h2>
                    <p>お祭り気分を味わおう！</p>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>無料プレゼント</h3>
                            <p>期間内にプレゼントを開けよう</p>
                        </div>
                        <div class="feature-card">
                            <h3>新規コラボ</h3>
                            <p>サンタ Sabrina、雪ミク、ハリーポッター</p>
                        </div>
                        <div class="feature-card">
                            <h3>バトルロイヤル</h3>
                            <p>ゴールデンコーストにもウィンターフェストが到来</p>
                        </div>
                    </div>
                    <div class="feature-actions">
                        <a class="btn ghost" href="quests.html">クエスト詳細を見る</a>
                    </div>
                </div>
                <div class="feature-media">
                    <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/cmj8qk7170o2807mw70vksvda" alt="ウィンターフェスト2025">
                </div>
            </section>

            <section id="news" class="section">
                <div class="section-head">
                    <h2>最新ニュース</h2>
                </div>
                <div class="news-wrapper">
                    <article class="news-card">
                        <a href="https://www.fortnite.com/news/make-your-way-to-the-esports-world-cup-in-fortnites-2-5-million-dollar-reload-elite-series?lang=ja">
                            <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/cmja4zc5k07l207o8s9njnzwi" alt="リロードエリートシリーズ" class="news-img">
                        </a>
                        <div class="news-content">
                            <p class="news-date">2025年12月17日</p>
                            <h3 class="news-title">『フォートナイト』の250万ドル リロードエリートシリーズで、Esports World Cupへの出場権を獲得しよう</h3>
                        </div>
                    </article>

                    <article class="news-card">
                        <a href="https://www.fortnite.com/news/fortnite-winterfest-2025-get-in-the-spirit?lang=ja">
                            <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/cmiq2szoj1sll07okmc8gc4dd" alt="コミュニティ" class="news-img">
                        </a>
                        <div class="news-content">
                            <p class="news-date"></p>
                            <h3 class="news-title">デベロッパーがフォートナイト コミュニティを作成できるようになりました</h3>
                        </div>
                    </article>

                    <article class="news-card">
                        <a href="https://www.fortnite.com/news/ten-million-dollar-fortnite-championship-series-2026?lang=ja">
                            <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/cmixikc3r1g9u07olqysqm677" alt="Fortnite Championship Series" class="news-img">
                        </a>
                        <div class="news-content">
                            <p class="news-date">2025年12月10日</p>
                            <h3 class="news-title">1000万ドル Fortnite Championship Series (FNCS) 2026の詳細</h3>
                        </div>
                    </article>
                </div>
            </section>

            <section id="shop" class="section shop">
                <div class="section-head">
                    <h2>本日のアイテムショップ</h2>
                    <p>トレンドと再販を一目で確認。</p>
                </div>
                                <div class="shop-grid">
                    <div class="shop-card">
                        <p class="shop-tag">新登場</p>
                        <h3>ステラ・レンジャー</h3>
                        <p class="shop-sub">1200 V-Bucks</p>
                        <p class="shop-note">限定アニメーション付きバックアクセ。</p>
                    </div>
                    <div class="shop-card">
                        <p class="shop-tag">再販</p>
                        <h3>ネオン・ドリフター</h3>
                        <p class="shop-sub">1500 V-Bucks</p>
                        <p class="shop-note">光るツルハシが復刻。</p>
                    </div>
                    <div class="shop-card">
                        <p class="shop-tag">バンドル</p>
                        <h3>ギャラクティックパック</h3>
                        <p class="shop-sub">2000 V-Bucks</p>
                        <p class="shop-note">レアスキン3種 + 500 V。</p>
                    </div>
                </div>
            </section>

            <section id="schedule" class="section timeline">
                <div class="section-head">
                    <h2>今後のフォートナイトスケジュール</h2>
                    <p>イベント参加に備えてチェック。</p>
                </div>
                <div class="timeline-list">
                    <div class="timeline-item">
                        <p class="timeline-date">6/2</p>
                        <p class="timeline-title">ウィークリーチャレンジ公開</p>
                    </div>
                    <div class="timeline-item">
                        <p class="timeline-date">6/5</p>
                        <p class="timeline-title">アリーナリセット / ランク報酬更新</p>
                    </div>
                    <div class="timeline-item">
                        <p class="timeline-date">6/8</p>
                        <p class="timeline-title">ライブイベント「デス・スターの終焉」</p>
                    </div>
                    <div class="timeline-item">
                        <p class="timeline-date">6/11</p>
                        <p class="timeline-title">新コラボチャレンジ開始</p>
                    </div>
                </div>
            </section>
        </main><section class="ad-section">
            <div class="ad-slot">広告枠</div>
        </section>


        <div data-include="includes/footer.html"></div>
        <script>
            const latestBlogList = document.getElementById("latest-blog-list");
            const homeTournamentList = document.getElementById("home-tournament-today");
            const normalizeDateTime = (value) => {
                if (typeof value !== "string") {
                    return "";
                }
                const trimmed = value.trim();
                if (!trimmed) {
                    return "";
                }
                const match = trimmed.match(
                    /^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2})(:\d{2})?(Z|[+-]\d{2}:\d{2})?$/
                );
                if (!match) {
                    return trimmed;
                }
                const seconds = match[2] ? match[2] : ":00";
                const zone = match[3] ? match[3] : "";
                return `${match[1]}${seconds}${zone}`;
            };

            const parseDate = (value) => {
                const normalized = normalizeDateTime(value);
                const time = Date.parse(normalized);
                return Number.isFinite(time) ? time : Number.NaN;
            };

            const getPostTime = (post) => {
                const publishTime = parseDate(post.publishAt);
                if (Number.isFinite(publishTime)) {
                    return publishTime;
                }
                const dateTime = parseDate(post.date);
                return Number.isFinite(dateTime) ? dateTime : 0;
            };
            if (latestBlogList) {
                fetch("assets/data/blog.json")
                    .then((response) => response.json())
                    .then((data) => {
                        if (!Array.isArray(data) || data.length === 0) {
                            latestBlogList.innerHTML = "<p class=\"blog-empty\">記事がまだありません。</p>";
                            return;
                        }

                        const now = Date.now();
                        const posts = data
                            .filter((post) => {
                                if (!post.publishAt) {
                                    return true;
                                }
                                const publishTime = parseDate(post.publishAt);
                                return Number.isFinite(publishTime) ? publishTime <= now : true;
                            })
                            .sort((a, b) => {
                                return getPostTime(b) - getPostTime(a);
                            })
                            .slice(0, 3);

                        if (posts.length === 0) {
                            latestBlogList.innerHTML = "<p class=\"blog-empty\">記事がまだありません。</p>";
                            return;
                        }

                        latestBlogList.innerHTML = posts
                            .map((post) => {
                                const title = post.title || "Untitled";
                                const date = post.date || "";
                                const category = post.category || "";
                                const excerpt = post.excerpt || "";
                                const cover = post.cover || "";
                                const id = post.id || "";
                                const path = post.path || (id ? `blog/posts/${id}/index.html` : "blog.html");
                                const meta = [date, category].filter(Boolean).join(" / ");
                                const metaHtml = meta ? `<p class="blog-meta">${meta}</p>` : "";

                                return `
                                    <a class="blog-link" href="${path}">
                                        <article class="blog-card">
                                            <div class="blog-cover">
                                                ${cover ? `<img src="${cover}" alt="${title}">` : ""}
                                            </div>
                                            <div class="blog-body">
                                                ${metaHtml}
                                                <h3>${title}</h3>
                                                <p class="blog-excerpt">${excerpt}</p>
                                                <span class="blog-read">続きを読む</span>
                                            </div>
                                        </article>
                                    </a>
                                `;
                            })
                            .join("");
                    })
                    .catch(() => {
                        latestBlogList.innerHTML = "<p class=\"blog-empty\">読み込みに失敗しました。</p>";
                    });
            }

            const formatTime = (start, end) => {
                if (start && end) {
                    return `${start} - ${end}`;
                }
                if (start) {
                    return `${start} -`;
                }
                return "時間未定";
            };

            const toMinutes = (timeText) => {
                if (!timeText) {
                    return null;
                }
                const parts = timeText.split(":");
                if (parts.length !== 2) {
                    return null;
                }
                const hours = Number(parts[0]);
                const minutes = Number(parts[1]);
                if (Number.isNaN(hours) || Number.isNaN(minutes)) {
                    return null;
                }
                return hours * 60 + minutes;
            };

            const buildTournamentCards = (entries) => {
                if (!entries || entries.length === 0) {
                    return "<p class=\"tournament-empty\">本日の競技はありません。</p>";
                }
                return entries
                    .map((entry, index) => {
                        const title = entry.title || "(タイトル未設定)";
                        const time = formatTime(entry.start, entry.end);
                        const image = entry.displayPlaylistImage || "";
                        const cover = image
                            ? `<img class="tournament-thumb" src="${image}" alt="${title}">`
                            : `<div class="tournament-thumb tournament-thumb--empty">NO IMAGE</div>`;

                        return `
                            <article class="tournament-card" style="--card-index:${index}">
                                ${cover}
                                <div class="tournament-card-body">
                                    <p class="tournament-time">${time}</p>
                                    <h3 class="tournament-title">${title}</h3>
                                    <div class="tournament-meta">
                                        <p class="tournament-tag">TOURNAMENT</p>
                                        <a class="btn ghost tournament-action" href="Tournament.html">詳細を確認</a>
                                    </div>
                                </div>
                            </article>
                        `;
                    })
                    .join("");
            };

            if (homeTournamentList) {
                fetch("assets/data/calendar_by_date.json")
                    .then((response) => response.json())
                    .then((data) => {
                        const dates = Array.isArray(data.competitiveDates)
                            ? data.competitiveDates
                            : (Array.isArray(data.dates) ? data.dates : []);
                        const now = new Date();
                        const todayKey = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, "0")}-${String(now.getDate()).padStart(2, "0")}`;
                        const today = dates.find((day) => day.date === todayKey);
                        const entries = today && Array.isArray(today.entries) ? today.entries : [];
                        const nowMinutes = now.getHours() * 60 + now.getMinutes();
                        const filteredEntries = entries.filter((entry) => {
                            const endMinutes = toMinutes(entry.end);
                            if (endMinutes === null) {
                                return true;
                            }
                            return endMinutes >= nowMinutes;
                        });
                        homeTournamentList.innerHTML = buildTournamentCards(filteredEntries);
                    })
                    .catch(() => {
                        homeTournamentList.innerHTML = "<p class=\"tournament-empty\">読み込みに失敗しました。</p>";
                    });
            }
        </script>
            <script src="assets/js/components.js" defer></script>
    </body>
</html>
